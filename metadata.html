<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PDF Metadata Editor | BOO BOO PDF Editor</title>

  <style>
    :root {
      --charcoal: #444444;
      --lavender-light: #efd9ff;
      --lavender-text: #c77dff;
      --white: #ffffff;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: var(--white);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
    }

    .main-container {
      display: flex;
      max-width: 1400px;
      width: 95%;
      gap: 30px;
      padding: 40px 0;
    }

    .content-area {
      flex: 3;
      text-align: center;
      min-width: 0;
    }

    /* Standardized Header */
    .header-box {
      background-color: var(--charcoal);
      color: var(--lavender-text);
      border: 3px solid var(--lavender-text);
      border-radius: 10px;
      padding: 20px 50px;
      display: inline-flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 40px;
      cursor: pointer;
    }

    .header-box h1 {
      font-family: 'Georgia', serif;
      font-size: 50px;
      margin: 0;
    }

    .header-box .divider {
      width: 2px;
      height: 50px;
      background-color: var(--lavender-text);
    }

    .header-box span {
      font-size: 20px;
      text-align: left;
      line-height: 1.1;
      font-weight: bold;
    }

    /* Tool UI Section */
    .tool-section {
      background-color: #fcfcfc;
      padding: 40px;
      border-radius: 30px;
      border: 1px dashed var(--lavender-text);
      margin-bottom: 40px;
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 25px;
    }

    .tool-btn {
      background-color: var(--lavender-light);
      border: none;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: bold;
      color: #444;
      border-radius: 50px;
      cursor: pointer;
      transition: 0.2s;
    }

    .tool-btn:hover:not(:disabled) {
      background-color: #e1bfff;
      transform: translateY(-2px);
    }

    .tool-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    input[type="file"] { display: none; }

    .meta-box {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .meta-box input {
      padding: 12px;
      width: 100%;
      max-width: 350px;
      border-radius: 15px;
      border: 2px solid var(--lavender-light);
      text-align: center;
      font-size: 16px;
      outline: none;
      transition: border-color 0.3s;
      box-sizing: border-box;
    }

    .meta-box input:focus {
      border-color: var(--lavender-text);
    }

    iframe {
      border: 1px solid #ccc;
      border-radius: 15px;
      margin-top: 30px;
      width: 100%;
      max-width: 800px;
      height: 500px;
    }

    /* SEO/AdSense Content Section */
    .info-content {
      text-align: left;
      margin-top: 50px;
      color: #555;
      padding: 0 20px;
    }

    .info-content h2 { color: var(--charcoal); border-left: 5px solid var(--lavender-text); padding-left: 15px; margin-top: 30px; }

    /* FOOTER SECTION - Sleek/Small */
    .footer-box {
      background-color: var(--charcoal);
      border-radius: 60px;
      padding: 20px 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 40px;
      color: white;
      margin-top: 60px;
    }

    .footer-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 100%;
      max-width: 350px;
    }

    .footer-btn {
      background-color: var(--lavender-light);
      padding: 8px 20px;
      border-radius: 25px;
      color: #444;
      text-decoration: none;
      font-weight: bold;
      font-size: 12px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 35px;
      transition: 0.2s;
    }

    .footer-btn:hover { background-color: var(--white); }

    .contact-info { border-left: 3px solid var(--lavender-text); padding-left: 20px; text-align: left; }
    .contact-info h4 { font-size: 18px; margin: 0; color: var(--lavender-text); }

    /* Sidebar Ad Area */
    .ad-sidebar {
      flex: 1;
      background-color: var(--lavender-light);
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 600px;
    }

    .ad-text {
      writing-mode: vertical-rl;
      transform: rotate(180deg);
      font-size: 40px;
      color: var(--charcoal);
      opacity: 0.3;
      font-family: 'Georgia', serif;
    }

    /* --- MOBILE RESPONSIVE FIXES --- */
    @media (max-width: 1000px) {
      .main-container { flex-direction: column; padding: 20px 0; }
      
      .header-box { padding: 15px 25px; gap: 15px; margin-bottom: 25px; }
      .header-box h1 { font-size: 28px; }
      .header-box .divider { height: 35px; }
      .header-box span { font-size: 14px; }

      .tool-section { padding: 20px; border-radius: 20px; }
      .tool-btn { width: 100%; padding: 12px; font-size: 15px; }
      
      iframe { height: 400px; }

      .ad-sidebar { width: 100%; min-height: 150px; margin-top: 20px; }
      .ad-text { writing-mode: horizontal-tb; transform: rotate(0); font-size: 24px; }

      .footer-box { flex-direction: column; gap: 20px; border-radius: 30px; padding: 25px 20px; }
      .footer-buttons { max-width: 100%; }
      .footer-btn { font-size: 11px; min-height: 32px; }
      .contact-info { border-left: none; border-top: 2px solid var(--lavender-text); padding-top: 15px; text-align: center; }
    }
  </style>
</head>
<body>

<div class="main-container">
  <div class="content-area">
    
    <div class="header-box" onclick="location.href='index.html'">
      <h1>METADATA</h1>
      <div class="divider"></div>
      <span>PDF<br>EDITOR</span>
    </div>

    <div class="tool-section">
      <div class="action-buttons">
        <label class="tool-btn">
          Upload PDF
          <input type="file" id="pdfFile" accept="application/pdf">
        </label>
        <button class="tool-btn" onclick="applyMetadata()">Apply Changes</button>
        <button class="tool-btn" id="downloadBtn" disabled>Download</button>
      </div>

      <div class="meta-box">
        <input type="text" id="title" placeholder="Document Title">
        <input type="text" id="author" placeholder="Author Name">
        <input type="text" id="subject" placeholder="Subject">
        <input type="text" id="keywords" placeholder="Keywords (comma separated)">
      </div>

      <div id="preview"></div>
    </div>

    <div class="info-content">
      <h2>How to Edit PDF Metadata Online</h2>
      <p>PDF metadata contains hidden information about your file, such as the creator, title, and keywords. Using BOO BOO PDF's metadata editor, you can professionally label your documents for better organization and SEO.</p>
      
      <h2>Enhanced Document Privacy</h2>
      <p>Metadata can sometimes contain sensitive information. By using our tool, you can overwrite this data to ensure your documents only carry the information you want to share. Processing happens entirely in your browser.</p>

      <h2>Free Educational Tools from SEUSL</h2>
      <p>This Metadata Editor is part of a student-led project at the South Eastern University of Sri Lanka (SEUSL).</p>
    </div>

    <div class="footer-box">
      <div class="footer-buttons">
        <div style="display: flex; gap: 8px; width: 100%;">
          <a href="about.html" class="footer-btn" style="flex: 1;">ABOUT US</a>
          <a href="terms.html" class="footer-btn" style="flex: 1;">TERMS & CONDITIONS</a>
        </div>
        <a href="privacy.html" class="footer-btn">PRIVACY POLICY</a>
      </div>

      <div class="contact-info">
        <h4 style="margin:0; color:var(--lavender-text)">Contact us</h4>
        <p style="margin:5px 0 0 0; font-size:14px; color: #bbb;">pabasaradimuth12345@gmail.com</p>
      </div>
    </div>
  </div>

  <div class="ad-sidebar">
    <div class="ad-text">AD Area</div>
  </div>
</div>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script>
    let metadataPdfUrl = null;

    async function applyMetadata() {
      const fileInput = document.getElementById('pdfFile');
      const preview = document.getElementById('preview');

      if (!fileInput.files.length) {
        alert('Please upload a PDF file first.');
        return;
      }

      preview.innerHTML = '<p style="color:var(--lavender-text); font-weight:bold;">Processing Metadata... Please wait.</p>';

      try {
        const file = fileInput.files[0];
        const bytes = await file.arrayBuffer();
        const pdfDoc = await PDFLib.PDFDocument.load(bytes);

        const title = document.getElementById('title').value;
        const author = document.getElementById('author').value;
        const subject = document.getElementById('subject').value;
        const keywords = document.getElementById('keywords').value;

        if (title) pdfDoc.setTitle(title);
        if (author) pdfDoc.setAuthor(author);
        if (subject) pdfDoc.setSubject(subject);
        if (keywords) pdfDoc.setKeywords(keywords.split(',').map(k => k.trim()));

        // Branding
        pdfDoc.setProducer('BOO BOO PDF Editor');
        pdfDoc.setCreator('BOO BOO PDF Editor');

        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        
        if (metadataPdfUrl) URL.revokeObjectURL(metadataPdfUrl);
        metadataPdfUrl = URL.createObjectURL(blob);

        // --- MOBILE PREVIEW FIX ---
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        if (isMobile) {
            preview.innerHTML = `
                <div style="padding: 20px; background: var(--lavender-light); border-radius: 15px; color: var(--charcoal); margin-top: 20px; border: 1px solid var(--lavender-text);">
                    <strong style="color: var(--lavender-text);">Success!</strong> Metadata updated.<br>
                    Tap <b>Download</b> below to save your file.
                </div>`;
        } else {
            preview.innerHTML = `<iframe src="${metadataPdfUrl}"></iframe>`;
        }

        document.getElementById('downloadBtn').disabled = false;
      } catch (e) {
        alert('Error processing PDF. Ensure the file is not corrupted.');
        preview.innerHTML = '';
      }
    }

    document.getElementById('downloadBtn').addEventListener('click', () => {
      if (!metadataPdfUrl) return;
      const a = document.createElement('a');
      a.href = metadataPdfUrl;
      a.download = 'metadata-edited-booboo.pdf';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    });
</script>

</body>
</html>